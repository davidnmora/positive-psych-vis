import json
import csv
import time
import grequests 
from pprint import pprint
from threading import Thread, RLock
mutex = RLock()

# GLOBABLS
authorJSONs = []
authorToAutherURLMap = {}
authorToS2IdMap			 = {}
authorsToAdd = [["Richard J. Davidson",1716527]] #

# PART 1: GET AUTHOR JSON INFO
def getAuthorJSON(response, *args, **kwargs):
	mutex.acquire()
	try:
		authorJSONs.append(response.content)
		print (json.loads(response.content)["name"])
		print "DONE: " +  response.url
	finally:
		mutex.release()

def exception_handler(request, exception):
	print "ERROR: request failed: " + request.url + "<<<<<<<"
	print ("Request error: {0}".format(exception))


for authorS2Pair in authorsToAdd:
	name = authorS2Pair[0]
	s2Id = int(authorS2Pair[1])
	authorToS2IdMap     [name]  = s2Id
	authorToAutherURLMap[name]  = "https://api.semanticscholar.org/v1/author/" + str(s2Id)
	# print name, s2Id


unsentAuthorRequests = []
for author in authorToAutherURLMap:
	unsentAuthorRequests.append(grequests.get(authorToAutherURLMap[author], hooks={'response': getAuthorJSON}))


grequests.map(unsentAuthorRequests, exception_handler=exception_handler) # actually make requests

# PART 2: COMPILE ALL PAPERS, INDEXED BY PAPER NAME
# loads existing json file
f = open("papers-by-title-UPDATE.json", "r")
existingJSONDict = json.loads(f.read())
f.close()

def getPaperJSON(response, *args, **kwargs):
	mutex.acquire()
	try:
		paper = json.loads(response.content)
		existingJSONDict[paper["title"]] = paper
		print "PAPER " + " DONE: " +  paper["title"]
	finally:
		mutex.release()

def getPaperURL(url):
	return "https://api.semanticscholar.org/v1/paper/" + url[(url.find("paper/") + len("paper/")):]

# >>> FOR ADDING BY LINK ARRAY:
unsentPaperRequests = []
urls = ["https://api.semanticscholar.org/v1/paper/208a5875efe2431d411b008350f4df74358b7dd1", "https://api.semanticscholar.org/v1/paper/bbca7890580a3f45a3d1b1d6321912537ef74e55", "https://api.semanticscholar.org/v1/paper/7ff3a4039c9d8ee92128546d6797453237702f1b", "https://api.semanticscholar.org/v1/paper/b30301ffa960ed17f16824e9badd94d82f40c5f9", "https://api.semanticscholar.org/v1/paper/f1710fb8642ad67a9c202082aea2036464a7db8c", "https://api.semanticscholar.org/v1/paper/777fc12ada0e6155399ab782d8af08ee5e96409e", "https://api.semanticscholar.org/v1/paper/a85549cc7837e8c866b3f005c32b93dffab741db", "https://api.semanticscholar.org/v1/paper/ffcbd8f1754713f5a4eb1eae12fc8f6282267793", "https://api.semanticscholar.org/v1/paper/8c63bf3b7b35d4ba6309cf19a181f6aaf8b83435", "https://api.semanticscholar.org/v1/paper/b521479b186437f334ee4240dca5141276d96de2", "https://api.semanticscholar.org/v1/paper/7acc573f6f0e86c907f9f5c97c5754c9e5fe15df", "https://api.semanticscholar.org/v1/paper/12ac41a1534a6a451965068f09ca6c517a32874c", "https://api.semanticscholar.org/v1/paper/d5f7674a52ccf76e86c419ee35922ca79fcf4e29", "https://api.semanticscholar.org/v1/paper/00762d52ef42a652496533984bceee75db88718b", "https://api.semanticscholar.org/v1/paper/d2cea131f736436d5078cc120aa0730eaf444088", "https://api.semanticscholar.org/v1/paper/3310df820aae8eb619ceb922e79086d9805d646d", "https://api.semanticscholar.org/v1/paper/75517eab1b488afbb7f5589cfd1afdab5c9f9e67", "https://api.semanticscholar.org/v1/paper/79c2ba4f3b02d4115fd056302878e2a271fe15f3", "https://api.semanticscholar.org/v1/paper/1d75796e6ff1e5447304ec6e13cd06460e08b12f", "https://api.semanticscholar.org/v1/paper/dbd33225f97db183b97088f7c755483be2de4e17", "https://api.semanticscholar.org/v1/paper/2642aa90abdf749ead300511c1875f160ee2ffdf", "https://api.semanticscholar.org/v1/paper/45eefc8be112adce882a10863aa6f09c7fcfbfc7", "https://api.semanticscholar.org/v1/paper/18aa9579eeab993e1cc6361c728ff48564349e62", "https://api.semanticscholar.org/v1/paper/79a0430fccec4d050357e7271d0d11a5be5f35ae", "https://api.semanticscholar.org/v1/paper/843a86922f3d8bed2134fd752d19b5106461177a", "https://api.semanticscholar.org/v1/paper/1b64e0b6b1248421ef1d114d03d723a1a8c18ac3", "https://api.semanticscholar.org/v1/paper/5e4ceee52cc650b0edfc4facdb6f7d04193ab77e", "https://api.semanticscholar.org/v1/paper/165f65210562ba76eedc3b0460d0afcbab9d6595", "https://api.semanticscholar.org/v1/paper/4e3783ce687ba532b177f2a0ef2528a4743e62a9", "https://api.semanticscholar.org/v1/paper/0136bf1d3747770a7fb4fcdeaf0b4b195815ed67", "https://api.semanticscholar.org/v1/paper/c6fda2163feee0cab18663f05f78daee04180936", "https://api.semanticscholar.org/v1/paper/36cdc0fb898c3441d75bfe5173b3c101322cca0f", "https://api.semanticscholar.org/v1/paper/7c398f56e85a333aa9232697683a2a301b1fa030", "https://api.semanticscholar.org/v1/paper/4d23b92d3a10f78f589d017b4da13b4741e541d8", "https://api.semanticscholar.org/v1/paper/2e0b2d106981b5e0e12d7cfba93a7d2235c61b54", "https://api.semanticscholar.org/v1/paper/24d22ecf8ac8537adb84b8e972b405ca39391e83", "https://api.semanticscholar.org/v1/paper/74d1f1752088b99f8945f888bc833f370c67b462", "https://api.semanticscholar.org/v1/paper/9c2f48ad6a989892f6338fb82b7bd439b3228fa1", "https://api.semanticscholar.org/v1/paper/7a23c3a6cea9630df407651fd6399f8267a9e505", "https://api.semanticscholar.org/v1/paper/997a4df7558666d5bd083e211307f746ed0ab7a1", "https://api.semanticscholar.org/v1/paper/510c9d4fd840b07cbcf7765f933379f36d521639", "https://api.semanticscholar.org/v1/paper/2d3fa735944906bf59e0406ff3988062d13d2db6", "https://api.semanticscholar.org/v1/paper/7599666ca9b70e0e04a7c165595d6f0cbd564597", "https://api.semanticscholar.org/v1/paper/d5da0932e1cb40d52c7ac1cdf37a4ce3446c7ca0", "https://api.semanticscholar.org/v1/paper/665f38d3e32b08e75dca4d5af9135dddde7bc25e", "https://api.semanticscholar.org/v1/paper/96ed9c05ca4be7989faa3cbbc6f50f4eed0f048f", "https://api.semanticscholar.org/v1/paper/686050d24e1b6a2112bfb3d0f6f77c3ef03461e8", "https://api.semanticscholar.org/v1/paper/0c7fab6970810642b0d8f239647cf62491daeb2f", "https://api.semanticscholar.org/v1/paper/fbd3ec95850f430e0963de85f191f3513458cc62", "https://api.semanticscholar.org/v1/paper/acbc8b0e00f746732cff1b567f50fedbc7afc631", "https://api.semanticscholar.org/v1/paper/130f97a1c3b91238fbdbf5b0b8632f7117172dbb", "https://api.semanticscholar.org/v1/paper/abc44c66f38af663e70d34fdb194112a506f6b27", "https://api.semanticscholar.org/v1/paper/72f9dcbdd31d685cd198b6c027d59eee125b4772", "https://api.semanticscholar.org/v1/paper/5bde69915cfa019ecb1273357cbfe6f2ba6d7742", "https://api.semanticscholar.org/v1/paper/5de62e0f271aa5a9cfa210c86be65adc0f9587dc", "https://api.semanticscholar.org/v1/paper/1b0cab1b63044296eefbda1aa44cc31b13ef06df", "https://api.semanticscholar.org/v1/paper/57feeb85954e92c1f29f26f022ab1c6c4a6dd866", "https://api.semanticscholar.org/v1/paper/0db1801c5f85c890d714a6721fa1504961c5cdf8", "https://api.semanticscholar.org/v1/paper/57dea6914a4ed1c130be074ed4131a6cf94de887", "https://api.semanticscholar.org/v1/paper/10dd452a4fd1af2765aec2e870bc21f7803ea3ce", "https://api.semanticscholar.org/v1/paper/7f2a8f3aa84146b30d7a06b1384cbc2c4fdf7cb8", "https://api.semanticscholar.org/v1/paper/48d9820f8f4358b5a75ef39c61ea7b8e00bd2d58", "https://api.semanticscholar.org/v1/paper/8c1e252d31a565e19925721c1233b2b07cdda69d", "https://api.semanticscholar.org/v1/paper/e18ed6f7e0f961f4cd2841a52926286eaa80d841", "https://api.semanticscholar.org/v1/paper/77ccf9a78fa15be84adc88a19213a85b01272553", "https://api.semanticscholar.org/v1/paper/b49d9cd5dc78477a88e355908e3348ed79bcfb3b", "https://api.semanticscholar.org/v1/paper/10df33b34ee2346361ec48871f420860922a45ab", "https://api.semanticscholar.org/v1/paper/399c2c7563e5893c04a47c692f75b4313442cf78", "https://api.semanticscholar.org/v1/paper/8b2135271aed88021435d2f85a7eee157b4fe919", "https://api.semanticscholar.org/v1/paper/d9703e26cc76701f42e499b6b359832f281c75ea", "https://api.semanticscholar.org/v1/paper/21db1334a75c6e12979d16de2e996c01e95006f5", "https://api.semanticscholar.org/v1/paper/e2467898325b52ba147ff85b3e402b6a09417e59", "https://api.semanticscholar.org/v1/paper/44b315edcadf527af7eb7ac2921341a03fd73970", "https://api.semanticscholar.org/v1/paper/367d2dc2c5e74163d129cfb2214cfe88e0b984cd", "https://api.semanticscholar.org/v1/paper/25056bc0fafa0f10e55b172fa830f687d1c6a490", "https://api.semanticscholar.org/v1/paper/69a3154d225de94457476277cebbcb909a9d0351", "https://api.semanticscholar.org/v1/paper/e86700786ba6ce033a727bfa0a2b19efa3ab3039", "https://api.semanticscholar.org/v1/paper/367dc83c950c5b8c09881c79be17d86ad6609815", "https://api.semanticscholar.org/v1/paper/6d2d5a273e5f0ddc4a2d41b871430de75e5bdf12", "https://api.semanticscholar.org/v1/paper/8b9a0c24761c0df403fbcf621ec97170d117479c", "https://api.semanticscholar.org/v1/paper/99cc04bce0a4e7d9f94958c01651d20d0c50a5ea", "https://api.semanticscholar.org/v1/paper/ce79858f5e515b2b7b5b787aec7fed8811da2c5c", "https://api.semanticscholar.org/v1/paper/2a3c2a010af4223cb700a2c21ca9bf03f78d7e09", "https://api.semanticscholar.org/v1/paper/713288986947d703b02fb94bee655152f765d047", "https://api.semanticscholar.org/v1/paper/27e6c7a73e7c2cb382b3a869111436c933882c1c", "https://api.semanticscholar.org/v1/paper/c8c2b7ee97ef6ac0967e3295eb18db96cf69186c", "https://api.semanticscholar.org/v1/paper/c185e3456ba8f51acadbf61704c83ec8f20f64d4", "https://api.semanticscholar.org/v1/paper/811ce9ba658bf24ab7224334c6c30aacc93b7c62", "https://api.semanticscholar.org/v1/paper/62bc6f7ece176b92e883599b68be9021028916d4", "https://api.semanticscholar.org/v1/paper/c742a4dc830c0849f9b9534ee1b4e666b70287d6", "https://api.semanticscholar.org/v1/paper/e421fed612a2ae83847983cbfa810cb3cd77aae1", "https://api.semanticscholar.org/v1/paper/b18fce8611db8e7a56aa8825882a91bae506fde5", "https://api.semanticscholar.org/v1/paper/d362cd381f207395c2d32284474ebe9bac5da2e3", "https://api.semanticscholar.org/v1/paper/87000102cf7088b1ba2520f00cd793f89c884716", "https://api.semanticscholar.org/v1/paper/5941a7c779d77b45680ef32028c3563250bea01b", "https://api.semanticscholar.org/v1/paper/58e02d15f416668937b4c1aa9bb15fadac38cf68", "https://api.semanticscholar.org/v1/paper/72446b4b67638e3f10c4369038cfae8bd0914106", "https://api.semanticscholar.org/v1/paper/5352f1a77c838670a5fd5d730e45a2bb8b42f874", "https://api.semanticscholar.org/v1/paper/ebeae1dbf3e7d3232d16e99a4352064c19aaec16", "https://api.semanticscholar.org/v1/paper/e3cd6f19c4f907733903b30dab466ff435cb0bc5", "https://api.semanticscholar.org/v1/paper/161020a9d9727bf0e3613532147cd1a5dd047073", "https://api.semanticscholar.org/v1/paper/31dd250323130448307fa865f56511b3b38fee81", "https://api.semanticscholar.org/v1/paper/84fa092da29e00683f0df0a2654c0177ac371c29", "https://api.semanticscholar.org/v1/paper/4c7dd598e2162ddb68e60d537a4e8331bd7b50ff", "https://api.semanticscholar.org/v1/paper/c2addd6f1cf77f2beebcee9ef265be2c58639b3e", "https://api.semanticscholar.org/v1/paper/9bbbe572ec179dc5c90c55bc9abbb04f77e8ffe2", "https://api.semanticscholar.org/v1/paper/cb191df32fcf0d0476890f822b392977bdb50711", "https://api.semanticscholar.org/v1/paper/ddf469107e3ff88dc0285c8d0b1d989599bbfeaf", "https://api.semanticscholar.org/v1/paper/e847071b557fdf7993117135da5b45acb73c6450", "https://api.semanticscholar.org/v1/paper/0850725de29caa88a2779e072b277dcaf83d47f0", "https://api.semanticscholar.org/v1/paper/16b5128a53297b3ef04bce1a351fc76c0db947ec", "https://api.semanticscholar.org/v1/paper/0d45eeb7ff7e511f4bda76665a400097c101312e", "https://api.semanticscholar.org/v1/paper/1de20e0a64670bf791ef8c6fb8c9ea2da9db936e", "https://api.semanticscholar.org/v1/paper/82eb7ba72669206179e97bcb42a915d018bba5a0", "https://api.semanticscholar.org/v1/paper/f4f18d3f4e6161441493f7519956e45dcafee29f", "https://api.semanticscholar.org/v1/paper/2a814056df2c94567b24e834ca58e5290d54d7f4", "https://api.semanticscholar.org/v1/paper/3031fb9316d08032c51164a12aeb0a6e6ca6a9bc", "https://api.semanticscholar.org/v1/paper/c69f60bc08ce1c1ed052a155871b0b767214f4be", "https://api.semanticscholar.org/v1/paper/15b6a1080f0a24160586b1861baad23f8eae6c3c", "https://api.semanticscholar.org/v1/paper/af66e296eaf3f66b1d46701a9b57e35de07f9e50", "https://api.semanticscholar.org/v1/paper/2e65757679fecd69d760def6790707416075b3f9", "https://api.semanticscholar.org/v1/paper/8df40150c83bd86eb67aaff8a8f3b8b19138da06", "https://api.semanticscholar.org/v1/paper/57ee196e963727404de9b2e70a7b7784fb557f42", "https://api.semanticscholar.org/v1/paper/094a3c3494509e895e43ea68f2253ec3f08751b8", "https://api.semanticscholar.org/v1/paper/d930d20ba42a5d868dd78dd73bac0f72110e0bc5", "https://api.semanticscholar.org/v1/paper/0c080c233354bfcce06204bdf9a4bd503fa48337", "https://api.semanticscholar.org/v1/paper/525779e13a54d4f06eeabcb4a3c3721c55051ccd", "https://api.semanticscholar.org/v1/paper/a39acb1df879eb992479a3c4220419b6bc07a490", "https://api.semanticscholar.org/v1/paper/2fa17f546003140985a08e95559a16d7efbfed8c", "https://api.semanticscholar.org/v1/paper/7c333e38058c0e7b024a38937bb26dce21340081", "https://api.semanticscholar.org/v1/paper/9b5b946507c74aaa7f68ca0849102694b7b0ce1f", "https://api.semanticscholar.org/v1/paper/cefb04503f73240b6064308adf680a1c594ff070", "https://api.semanticscholar.org/v1/paper/6d5ef51b140b65142bb8de88db0d5cc1ddd00968", "https://api.semanticscholar.org/v1/paper/ece05d3853e7bd67c14c8a321cd5378a16645410", "https://api.semanticscholar.org/v1/paper/56b343a5b6da9f1b469f4ce5d3d18a21fcf075b1", "https://api.semanticscholar.org/v1/paper/9c7271ccf04af522bb4def41d3d1ecc6ed63e5d2", "https://api.semanticscholar.org/v1/paper/5a885b53ffca6b7d8e81974fdace5cf0ab3d85b4", "https://api.semanticscholar.org/v1/paper/2211f98261fc9cc8a67a99d60be6cb6603de7c5d", "https://api.semanticscholar.org/v1/paper/26a02d4dc3ad3263a3f1b9284468f473011a4339", "https://api.semanticscholar.org/v1/paper/480a66a469ec4f98673f3dec3e48b65503b29fd4", "https://api.semanticscholar.org/v1/paper/e2a7bc29d88407636d11d07b9aff433a16fbbe5d", "https://api.semanticscholar.org/v1/paper/a2eff4c7995a09e071b9e18e220aa9bbfc1e808b", "https://api.semanticscholar.org/v1/paper/2e3c225c43132aeb03d17e48ccfd3677dc699568", "https://api.semanticscholar.org/v1/paper/3e7410dc652485823112cca22e2053846d56b664", "https://api.semanticscholar.org/v1/paper/aa5b640ef40d0cfdbd9fda370ccc35e18592f762", "https://api.semanticscholar.org/v1/paper/15837a2a84bc424522ccbcab86197957cfc8896f", "https://api.semanticscholar.org/v1/paper/b047fd4539d112bad3a39c8da3404af1ed78a1b6", "https://api.semanticscholar.org/v1/paper/8afebf79e0dcd2f80abfa96906f6fceda396eb2a", "https://api.semanticscholar.org/v1/paper/a7452181fd8210dc9ef9cff8f1c36b16f4d33bec", "https://api.semanticscholar.org/v1/paper/a4021d665e8d5445cf0766a2bbb6cab2f339d83b", "https://api.semanticscholar.org/v1/paper/e1fa69fd9ec774cc7d568509cef8a4521568962a", "https://api.semanticscholar.org/v1/paper/0c48b3c0aadae1810cf3401abca0026351fd34ee", "https://api.semanticscholar.org/v1/paper/7c35c5fafac14b78c5dd2dab8ae26f23a09533d8", "https://api.semanticscholar.org/v1/paper/5673dfd9f34ed2a542e8b8ae5732c4c089079d77", "https://api.semanticscholar.org/v1/paper/c148c079080a7c3af3c5bce598853ed663374f75", "https://api.semanticscholar.org/v1/paper/09517e65cef3d8ae28bf4f6336bd437e5c65ee24", "https://api.semanticscholar.org/v1/paper/bae87f5a735093a80bebf13d923ab7add8236458", "https://api.semanticscholar.org/v1/paper/29c57af576caca3d197d3da4bd624be19408d368", "https://api.semanticscholar.org/v1/paper/6c134bff020dbc5ecd5bf5ebd7d4ec568a49b3ab", "https://api.semanticscholar.org/v1/paper/e8d7a1ae44ec1876d78a3b3f2c6758d677efbfe2", "https://api.semanticscholar.org/v1/paper/e588dc14464a413cc2aeb6cf640a8707501d5e59", "https://api.semanticscholar.org/v1/paper/a9be7b889fa4259bcdd033bc39058254a28b20dd", "https://api.semanticscholar.org/v1/paper/a809e550564e88d3502140e756765176a77e94ea", "https://api.semanticscholar.org/v1/paper/c35c851c7fdd8d1bb58538ed979bd136c03e04d6", "https://api.semanticscholar.org/v1/paper/3784a6cfd8d7ee60ad2928d46f35672e95415760", "https://api.semanticscholar.org/v1/paper/87ba2e6808f21fef2029f12a34d12ea09dbf1bd8", "https://api.semanticscholar.org/v1/paper/b50e42fb459fec3b8775ff454c46d5180494a510", "https://api.semanticscholar.org/v1/paper/10b857c2c32e2412f9d40f55b30ff9ecc15d39c8", "https://api.semanticscholar.org/v1/paper/8d35806f3b96605e951188ccc4eb16cbb801b859", "https://api.semanticscholar.org/v1/paper/456729631310e3024b573055c60a477ea0e73996", "https://api.semanticscholar.org/v1/paper/250b1ca53dc06dc15b40f2a982253c5f85228fd5", "https://api.semanticscholar.org/v1/paper/3d210235d2105ec393dffa6a1c0532e6c705fdd9", "https://api.semanticscholar.org/v1/paper/18e4a30a8ec366f41e052e50e793d35500998076", "https://api.semanticscholar.org/v1/paper/3aa846e067966bbcd8e1794837adfa7daf9d8b4c", "https://api.semanticscholar.org/v1/paper/d4f7bc781eacc3b23fe8dbe29836c34e5440277b", "https://api.semanticscholar.org/v1/paper/72efafe710256a371b8738081b562d14bfd0288b", "https://api.semanticscholar.org/v1/paper/214a30ea688e3bd1c0105f90c7d0833249aceec0", "https://api.semanticscholar.org/v1/paper/2361354d26bad70e3f5019b7b4bc4dee6c7bd600", "https://api.semanticscholar.org/v1/paper/796e2e8a8916888f864a1d88eb2fd49f3642744e", "https://api.semanticscholar.org/v1/paper/96298e01f3b393251f8d141fb9102b04d31fe237", "https://api.semanticscholar.org/v1/paper/d20c6044b873b2f0731059128a007c871f083d71", "https://api.semanticscholar.org/v1/paper/4f7ad8316b91f673860d7aaf55d54e6125fda04e", "https://api.semanticscholar.org/v1/paper/7bd2174878685922c8114429b2d3c724349b7ca1", "https://api.semanticscholar.org/v1/paper/175754d83888a4164b84f7310dc8d23274403976", "https://api.semanticscholar.org/v1/paper/0f7f18ba741a460cb84fd463c3ffa2109292f4a6", "https://api.semanticscholar.org/v1/paper/d1a7ffa95a0d190e5644f5ffaa6bed516d9cf75c", "https://api.semanticscholar.org/v1/paper/fb16cbe7abf4589519c561414e08a8aae639e967", "https://api.semanticscholar.org/v1/paper/24c8c90ba9b30414cc7ac21a89ce511afa4fae3e", "https://api.semanticscholar.org/v1/paper/62381883da7a645a0fcd8c50491d8b01ef8412eb", "https://api.semanticscholar.org/v1/paper/5ad4b510da776d59125ecf048f4af5c112913acf", "https://api.semanticscholar.org/v1/paper/8289b4e4e261aba041e5661971f3a5cd777f6116", "https://api.semanticscholar.org/v1/paper/d91b95d05c196978acab9d37e12d765695c702b1", "https://api.semanticscholar.org/v1/paper/109c25426336a81a2bf5ca57c7ffbb40e19c8873", "https://api.semanticscholar.org/v1/paper/2359fcf6c270abb4243af0bc5f3bdbfcc3e5200a", "https://api.semanticscholar.org/v1/paper/d8cbe136dd95d287786d0ed5f0d0e53f143bca7f", "https://api.semanticscholar.org/v1/paper/60a3b99855c88835bf299c252b3352d273b61e56", "https://api.semanticscholar.org/v1/paper/d4c45207560e77345940b171bc23c7d223b58019", "https://api.semanticscholar.org/v1/paper/12fd8924b5554de572470e26fac066ffe1affba8", "https://api.semanticscholar.org/v1/paper/12539630df53e05e96789313b2ca899ab468de99", "https://api.semanticscholar.org/v1/paper/6d59688cd9a69051414d38d30a67fdacbf872be9"]
for url in urls:
	unsentPaperRequests.append(grequests.get(url, hooks={'response': getPaperJSON}))
grequests.map(unsentPaperRequests, exception_handler=exception_handler) # actually make requests
# <<< end link array


# >>> FOR ADDING BY AUTHOR AND S2ID
# for authorJSON in authorJSONs:
# 	unsentPaperRequests = []
# 	author = json.loads(authorJSON)
# 	for paper in author["papers"]:
# 		print paper["title"]
# 		unsentPaperRequests.append(grequests.get(getPaperURL(paper["url"]), hooks={'response': getPaperJSON}))
# 	grequests.map(unsentPaperRequests, exception_handler=exception_handler) # actually make requests
# 	print author["name"] + " scheduled."
# 	print "MAIN THREAD SLEEPING FOR 7 SEC before spawning new author requests..."
# 	time.sleep(7)
# <<< end by author and s2id


print "FINISHED grequests.map ..................."

paperJSONFile = open("papers-by-title-UPDATE2.json", "w")
paperJSONFile.write(json.dumps(existingJSONDict))
paperJSONFile.close()
print "COMPLETE: json saved to disk"